{% extends "base.html" %}

{% block title %}Account Settings{% endblock %}

{% block additional_css %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/onboarding.css') }}">
<style>
    /* Specific overrides for settings page */
    .onboarding-container {
        max-width: 900px;
    }

    .settings-grid {
        display: grid;
        grid-template-columns: 250px 1fr;
        gap: 2rem;
    }

    .settings-nav {
        background: rgba(30, 30, 30, 0.4);
        border-radius: 12px;
        padding: 1rem;
        border: 1px solid rgba(255, 255, 255, 0.05);
        height: fit-content;
    }

    .settings-nav-item {
        display: block;
        padding: 12px 18px;
        color: var(--text-primary);
        text-decoration: none;
        border-radius: 8px;
        margin-bottom: 0.5rem;
        transition: all 0.3s ease;
        font-family: 'Neon-Regular', sans-serif;
    }

    .settings-nav-item:hover,
    .settings-nav-item.active {
        background: rgba(65, 105, 225, 0.2);
        color: var(--accent-blue);
    }

    .settings-nav-item i {
        width: 20px;
        margin-right: 10px;
        text-align: center;
    }

    @media (max-width: 768px) {
        .settings-grid {
            grid-template-columns: 1fr;
        }
    }

    .danger-zone {
        margin-top: 3rem;
        border-top: 1px solid rgba(231, 76, 60, 0.3);
        padding-top: 2rem;
    }

    .btn-danger-outline {
        border: 1px solid #e74c3c;
        color: #e74c3c;
        background: transparent;
        padding: 10px 20px;
        border-radius: 8px;
        cursor: pointer;
        transition: all 0.3s ease;
        text-decoration: none;
        display: inline-block;
    }

    .btn-danger-outline:hover {
        background: rgba(231, 76, 60, 0.1);
        box-shadow: 0 0 10px rgba(231, 76, 60, 0.2);
    }
</style>
{% endblock %}

{% block content %}
<main class="onboarding-container">
    <div class="onboarding-card">
        <div class="onboarding-header">
            <h1 class="onboarding-title">Account Settings</h1>
            <p class="onboarding-subtitle">Manage your profile and security preferences</p>
        </div>

        <div class="settings-grid">
            <!-- Sidebar Navigation -->
            <nav class="settings-nav">
                <a href="{{ url_for('user.settings') }}" class="settings-nav-item active">
                    <i class="fas fa-user-cog"></i> Profile & Security
                </a>
                <a href="{{ url_for('user.preferences') }}" class="settings-nav-item">
                    <i class="fas fa-sliders-h"></i> Preferences
                </a>
                <a href="{{ url_for('notifications.preferences') }}" class="settings-nav-item">
                    <i class="fas fa-bell"></i> Notifications
                </a>
                <a href="{{ url_for('user.saved_items') }}" class="settings-nav-item">
                    <i class="fas fa-heart"></i> Saved Items
                </a>
                <a href="{{ url_for('user.my_account') }}" class="settings-nav-item">
                    <i class="fas fa-receipt"></i> Orders & Billing
                </a>
            </nav>

            <!-- Main Content Area -->
            <div class="settings-content">
                <form method="POST" action="">
                    {{ settings_form.hidden_tag() }}

                    <!-- Profile Section -->
                    <h3 class="dash-card-header"
                        style="background:none; padding-left:0; margin-bottom:1.5rem; border-bottom:1px solid rgba(255,255,255,0.1); padding-bottom:0.5rem;">
                        <span style="font-family:'Neon-Heavy',sans-serif; font-size:1.2rem; text-transform:uppercase;">
                            <i class="fas fa-id-card" style="color:var(--accent-blue); margin-right:10px;"></i> Public
                            Profile
                        </span>
                    </h3>

                    <div class="form-row">
                        <div class="form-group">
                            {{ settings_form.username.label }}
                            {{ settings_form.username(class="form-control") }}
                            {% if settings_form.username.errors %}
                            <span class="form-error">{{ settings_form.username.errors[0] }}</span>
                            {% endif %}
                        </div>

                        <div class="form-group">
                            {{ settings_form.email.label }}
                            {{ settings_form.email(class="form-control") }}
                            {% if settings_form.email.errors %}
                            <span class="form-error">{{ settings_form.email.errors[0] }}</span>
                            {% endif %}
                        </div>
                    </div>

                    <div class="form-group">
                        {{ settings_form.location.label }}
                        {{ settings_form.location(class="form-control", placeholder="e.g. New York, NY") }}
                        {% if settings_form.location.errors %}
                        <span class="form-error">{{ settings_form.location.errors[0] }}</span>
                        {% endif %}
                    </div>

                    <div class="form-group">
                        {{ settings_form.bio.label }}
                        {{ settings_form.bio(class="form-control", rows="4", placeholder="Tell us a bit about
                        yourself...") }}
                        {% if settings_form.bio.errors %}
                        <span class="form-error">{{ settings_form.bio.errors[0] }}</span>
                        {% endif %}
                    </div>

                    <!-- Security Section -->
                    <h3 class="dash-card-header"
                        style="background:none; padding-left:0; margin-top:2rem; margin-bottom:1.5rem; border-bottom:1px solid rgba(255,255,255,0.1); padding-bottom:0.5rem;">
                        <span style="font-family:'Neon-Heavy',sans-serif; font-size:1.2rem; text-transform:uppercase;">
                            <i class="fas fa-lock" style="color:var(--accent-blue); margin-right:10px;"></i> Change
                            Password
                        </span>
                    </h3>

                    <div class="form-row">
                        <div class="form-group">
                            {{ settings_form.password.label }}
                            {{ settings_form.password(class="form-control", placeholder="Leave blank to keep current")
                            }}
                            {% if settings_form.password.errors %}
                            <span class="form-error">{{ settings_form.password.errors[0] }}</span>
                            {% endif %}
                        </div>

                        <div class="form-group">
                            {{ settings_form.confirm_password.label }}
                            {{ settings_form.confirm_password(class="form-control", placeholder="Confirm new password")
                            }}
                            {% if settings_form.confirm_password.errors %}
                            <span class="form-error">{{ settings_form.confirm_password.errors[0] }}</span>
                            {% endif %}
                        </div>
                    </div>

                    <div class="form-actions" style="margin-top:2rem;">
                        <button type="submit" class="btn-primary">
                            <i class="fas fa-save"></i> Save Changes
                        </button>
                    </div>
                </form>

                <!-- Danger Zone -->
                <div class="danger-zone">
                    <h4 style="color:#e74c3c; margin-bottom:1rem; font-family:'Neon-Heavy',sans-serif;">Danger Zone</h4>
                    <p style="color:rgba(255,255,255,0.6); margin-bottom:1rem; font-size:0.9rem;">
                        Once you delete your account, there is no going back. Please be certain.
                    </p>
                    <a href="#" onclick="alert('This feature is currently disabled for safety.'); return false;"
                        class="btn-danger-outline">
                        Delete Account
                    </a>
                </div>
            </div>
        </div>
    </div>
</main>
{% endblock %}