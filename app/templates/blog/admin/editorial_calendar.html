{% extends "base.html" %}

{% block title %}Editorial Calendar{% endblock %}

{% block content %}
<div class="container py-8">
    <div class="flex justify-between items-center mb-6">
        <h1 class="text-3xl font-bold"><i class="fas fa-calendar-alt mr-2"></i>Editorial Calendar</h1>
        <div class="flex gap-2">
            <a href="{{ url_for('blog.new_post') }}"
                class="px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600">
                <i class="fas fa-plus mr-1"></i>New Post
            </a>
            <a href="{{ url_for('blog.manage_posts') }}" class="px-4 py-2 border rounded-lg hover:bg-gray-100">
                <i class="fas fa-list mr-1"></i>All Posts
            </a>
        </div>
    </div>

    {% with messages = get_flashed_messages(with_categories=true) %}
    {% if messages %}
    {% for category, message in messages %}
    <div
        class="alert {% if category == 'success' %}bg-green-100 text-green-700{% elif category == 'danger' %}bg-red-100 text-red-700{% else %}bg-blue-100 text-blue-700{% endif %} p-4 rounded-lg mb-4">
        {{ message|e }}
    </div>
    {% endfor %}
    {% endif %}
    {% endwith %}

    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
        <!-- Scheduled Posts -->
        <div class="bg-white rounded-lg shadow">
            <div class="p-4 border-b bg-yellow-50">
                <h2 class="text-xl font-bold text-yellow-800">
                    <i class="fas fa-clock mr-2"></i>Scheduled Posts
                </h2>
                <p class="text-sm text-yellow-600">Posts waiting to be published</p>
            </div>
            <div class="p-4">
                {% if scheduled_posts %}
                <div class="space-y-3">
                    {% for post in scheduled_posts %}
                    <div class="flex items-center justify-between p-3 bg-yellow-50 rounded-lg">
                        <div>
                            <a href="{{ url_for('blog.edit_post', post_id=post.id) }}"
                                class="font-medium hover:text-blue-600">
                                {{ post.title|e }}
                            </a>
                            <div class="text-sm text-gray-500">
                                <i class="fas fa-calendar mr-1"></i>
                                {{ post.publish_at.strftime('%B %d, %Y at %I:%M %p') }}
                            </div>
                        </div>
                        <a href="{{ url_for('blog.preview_post', post_id=post.id) }}"
                            class="px-3 py-1 text-sm border rounded-lg hover:bg-gray-100" target="_blank">
                            <i class="fas fa-eye mr-1"></i>Preview
                        </a>
                    </div>
                    {% endfor %}
                </div>
                {% else %}
                <div class="text-center py-8 text-gray-500">
                    <i class="fas fa-calendar-check text-3xl mb-2"></i>
                    <p>No scheduled posts</p>
                </div>
                {% endif %}
            </div>
        </div>

        <!-- Recently Published -->
        <div class="bg-white rounded-lg shadow">
            <div class="p-4 border-b bg-green-50">
                <h2 class="text-xl font-bold text-green-800">
                    <i class="fas fa-check-circle mr-2"></i>Recently Published
                </h2>
                <p class="text-sm text-green-600">Last 20 published posts</p>
            </div>
            <div class="p-4">
                {% if recent_published %}
                <div class="space-y-2 max-h-96 overflow-y-auto">
                    {% for post in recent_published %}
                    <div class="flex items-center justify-between p-2 hover:bg-gray-50 rounded">
                        <div class="flex-1 min-w-0">
                            <a href="{{ url_for('blog.edit_post', post_id=post.id) }}"
                                class="font-medium hover:text-blue-600 truncate block">
                                {{ post.title|e }}
                            </a>
                            <span class="text-xs text-gray-500">
                                {{ post.created_at.strftime('%b %d, %Y') }}
                                {% if post.is_featured %}
                                <span class="text-yellow-600 ml-1"><i class="fas fa-star"></i></span>
                                {% endif %}
                            </span>
                        </div>
                        <a href="{{ url_for('blog.show_post', slug=post.slug) }}"
                            class="text-gray-400 hover:text-blue-500 ml-2" target="_blank">
                            <i class="fas fa-external-link-alt"></i>
                        </a>
                    </div>
                    {% endfor %}
                </div>
                {% else %}
                <div class="text-center py-8 text-gray-500">
                    <i class="fas fa-file-alt text-3xl mb-2"></i>
                    <p>No published posts yet</p>
                </div>
                {% endif %}
            </div>
        </div>
    </div>

    <!-- Quick Links -->
    <div class="mt-6 grid grid-cols-2 md:grid-cols-4 gap-4">
        <a href="{{ url_for('blog.manage_categories') }}"
            class="p-4 bg-white rounded-lg shadow hover:shadow-md transition-shadow text-center">
            <i class="fas fa-folder text-2xl text-blue-500 mb-2"></i>
            <div class="font-medium">Categories</div>
        </a>
        <a href="{{ url_for('blog.manage_tags') }}"
            class="p-4 bg-white rounded-lg shadow hover:shadow-md transition-shadow text-center">
            <i class="fas fa-tags text-2xl text-green-500 mb-2"></i>
            <div class="font-medium">Tags</div>
        </a>
        <a href="{{ url_for('blog.manage_series') }}"
            class="p-4 bg-white rounded-lg shadow hover:shadow-md transition-shadow text-center">
            <i class="fas fa-layer-group text-2xl text-purple-500 mb-2"></i>
            <div class="font-medium">Series</div>
        </a>
        <a href="{{ url_for('blog.comment_moderation') }}"
            class="p-4 bg-white rounded-lg shadow hover:shadow-md transition-shadow text-center">
            <i class="fas fa-comments text-2xl text-orange-500 mb-2"></i>
            <div class="font-medium">Comments</div>
        </a>
    </div>
</div>
{% endblock %}