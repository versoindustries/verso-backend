{% extends "base.html" %}

{% block additional_css %}
<link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='css/admindash.css') }}">
<link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='css/components/theme-editor.css') }}">
{% endblock %}

{% block content %}
<div data-react-component="ThemeEditor" data-react-props='{
        "currentTheme": {
            "primaryColor": "{{ current_theme.primary_color }}",
            "secondaryColor": "{{ current_theme.secondary_color }}",
            "accentColor": "{{ current_theme.accent_color }}",
            "fontFamily": "{{ current_theme.font_family }}",
            "borderRadius": {{ current_theme.border_radius }},
            "ga4TrackingId": "{{ current_theme.ga4_tracking_id or '' }}"
        },
        "fontChoices": {{ font_choices_json | safe }},
        "formActionUrl": "{{ url_for(' theme.theme_editor') }}", "logoUploadUrl" : "{{ url_for('theme.upload_logo') }}"
    , "logoRemoveUrl" : "{{ url_for('theme.remove_logo') }}" , "previewUrl" : "{{ url_for('theme.theme_preview') }}"
    , "dashboardUrl" : "{{ url_for('admin.admin_dashboard') }}" , {% if logo %} "currentLogoUrl"
    : "{{ url_for('media_bp.serve_media', media_id=logo.id) }}" , {% endif %} "csrfToken" : "{{ csrf_token() }}" }'>
    <!-- Loading fallback -->
    <div class="theme-editor">
        <h1><i class="fas fa-palette"></i> Theme Editor</h1>
        <div class="text-center py-4">
            <div class="spinner-border text-primary" role="status">
                <span class="visually-hidden">Loading...</span>
            </div>
        </div>
    </div>
</div>
{% endblock %}