{% extends "base.html" %}

{% block title %}Content Management{% endblock %}

{% block content %}
<div class="content-management">
    <h2>Content Management</h2>

    <!-- Form for Adding or Editing Content -->
    <form action="{{ url_for('admin.content_management') }}" method="post">
        {{ form.hidden_tag() }}
        <div>
            <label for="title">Title:</label>
            {{ form.title(class="form-control") }}
            {% if form.title.errors %}
                <div class="error">{{ form.title.errors[0] }}</div>
            {% endif %}
        </div>
        <div>
            <label for="content">Content:</label>
            {{ form.content(class="form-control") }}
            {% if form.content.errors %}
                <div class="error">{{ form.content.errors[0] }}</div>
            {% endif %}
        </div>
        <div>
            {{ form.submit(class="btn btn-primary") }}
        </div>
    </form>

    <!-- List Existing Content -->
    <div class="existing-content">
        <h3>Existing Announcements</h3>
        {% for announcement in announcements %}
        <div class="announcement-item">
            <h4>{{ announcement.title }}</h4>
            <p>{{ announcement.content }}</p>
            <div class="actions">
                <a href="{{ url_for('admin.edit_content', id=announcement.id) }}" class="btn btn-secondary">Edit</a>
                <a href="{{ url_for('admin.delete_content', id=announcement.id) }}" class="btn btn-danger">Delete</a>
            </div>
        </div>
        {% else %}
        <p>No announcements to display.</p>
        {% endfor %}
    </div>
</div>
{% endblock %}
